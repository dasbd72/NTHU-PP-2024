import matplotlib.pyplot as plt

# OSU MPI Latency Test Data
sizes_latency = [
    0,
    1,
    2,
    4,
    8,
    16,
    32,
    64,
    128,
    256,
    512,
    1024,
    2048,
    4096,
    8192,
    16384,
    32768,
    65536,
    131072,
    262144,
    524288,
    1048576,
    2097152,
    4194304,
]
ud_verbs_latency = [
    1.58,
    1.52,
    1.50,
    1.49,
    1.50,
    1.63,
    1.65,
    1.72,
    1.84,
    3.06,
    3.40,
    4.11,
    5.56,
    8.76,
    10.69,
    14.61,
    25.24,
    36.07,
    62.28,
    123.62,
    233.57,
    452.23,
    892.12,
    1800.67,
]
all_latency = [
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.25,
    0.24,
    0.35,
    0.38,
    0.41,
    0.50,
    0.65,
    0.98,
    1.66,
    3.00,
    4.87,
    8.67,
    17.42,
    36.19,
    67.12,
    133.90,
    286.51,
    978.06,
]
sysv_latency = [
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.23,
    0.24,
    0.36,
    0.38,
    0.41,
    0.50,
    0.65,
    0.97,
    1.92,
    3.01,
    4.99,
    8.86,
    17.03,
    33.30,
    63.70,
    126.07,
    268.26,
    773.04,
]
posix_latency = [
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.24,
    0.25,
    0.35,
    0.37,
    0.41,
    2.25,
    0.65,
    0.97,
    3.47,
    3.66,
    5.55,
    9.24,
    34.72,
    53.09,
    105.52,
    207.52,
    492.15,
    1180.84,
]
shm_latency = [
    0.20,
    0.20,
    0.20,
    0.20,
    0.20,
    0.21,
    0.25,
    0.25,
    0.35,
    0.38,
    0.41,
    0.50,
    0.65,
    0.97,
    1.67,
    3.03,
    4.91,
    8.79,
    17.32,
    35.63,
    67.78,
    138.14,
    297.94,
    974.48,
]

# OSU MPI Bandwidth Test Data
sizes_bandwidth = [
    1,
    2,
    4,
    8,
    16,
    32,
    64,
    128,
    256,
    512,
    1024,
    2048,
    4096,
    8192,
    16384,
    32768,
    65536,
    131072,
    262144,
    524288,
    1048576,
    2097152,
    4194304,
]
ud_verbs_bandwidth = [
    2.41,
    4.80,
    11.47,
    23.61,
    41.77,
    80.69,
    158.10,
    286.46,
    396.33,
    718.25,
    1163.41,
    1694.12,
    1817.40,
    2023.91,
    2259.54,
    2367.30,
    2441.62,
    2437.66,
    2466.70,
    2435.15,
    2486.87,
    2478.96,
    2376.14,
]
all_bandwidth = [
    7.36,
    14.90,
    30.02,
    60.02,
    119.91,
    237.60,
    472.81,
    482.44,
    968.35,
    1846.89,
    2934.03,
    4412.54,
    6412.09,
    8201.33,
    4072.27,
    5590.30,
    7551.98,
    8666.31,
    8183.98,
    8268.99,
    8040.55,
    7858.60,
    7231.18,
]
sysv_bandwidth = [
    10.12,
    19.95,
    40.96,
    82.44,
    165.31,
    322.16,
    629.92,
    639.87,
    1253.19,
    2370.46,
    3748.94,
    5816.70,
    8162.42,
    10043.90,
    9105.81,
    9985.00,
    10802.41,
    10635.68,
    8924.49,
    8918.31,
    8938.87,
    8915.54,
    8394.70,
]
posix_bandwidth = [
    10.16,
    20.39,
    40.99,
    82.31,
    164.93,
    324.21,
    647.13,
    639.13,
    1194.86,
    2380.71,
    3844.64,
    5798.91,
    926.02,
    10371.53,
    9019.22,
    9809.07,
    10314.87,
    10267.63,
    4625.60,
    5731.45,
    4845.79,
    5284.48,
    5129.41,
]
shm_bandwidth = [
    10.11,
    20.43,
    41.02,
    82.57,
    161.65,
    323.59,
    632.06,
    605.28,
    1221.93,
    2356.38,
    3892.91,
    5847.03,
    8063.54,
    10235.80,
    5098.55,
    6749.45,
    8030.51,
    8873.34,
    8320.89,
    8255.05,
    8049.88,
    8002.26,
    6984.63,
]

# Plot OSU MPI Latency Test
plt.figure(figsize=(10, 6))
plt.plot(sizes_latency, ud_verbs_latency, label="ud_verbs")
plt.plot(sizes_latency, all_latency, label="all")
plt.plot(sizes_latency, sysv_latency, label="sysv")
plt.plot(sizes_latency, posix_latency, label="posix")
plt.plot(sizes_latency, shm_latency, label="shm")
plt.xlabel("Message Size (Bytes)")
plt.ylabel("Latency (us)")
plt.title("OSU MPI Latency Test")
plt.legend()
plt.grid(True)
plt.show()

# Plot OSU MPI Bandwidth Test
plt.figure(figsize=(10, 6))
plt.plot(sizes_bandwidth, ud_verbs_bandwidth, label="ud_verbs")
plt.plot(sizes_bandwidth, all_bandwidth, label="all")
plt.plot(sizes_bandwidth, sysv_bandwidth, label="sysv")
plt.plot(sizes_bandwidth, posix_bandwidth, label="posix")
plt.plot(sizes_bandwidth, shm_bandwidth, label="shm")
plt.xlabel("Message Size (Bytes)")
plt.ylabel("Bandwidth (MB/s)")
plt.title("OSU MPI Bandwidth Test")
plt.legend()
plt.grid(True)
plt.show()

# OSU MPI Latency Test Data
sizes_latency = [
    0,
    1,
    2,
    4,
    8,
    16,
    32,
    64,
    128,
    256,
    512,
    1024,
    2048,
    4096,
    8192,
    16384,
    32768,
    65536,
    131072,
    262144,
    524288,
    1048576,
    2097152,
    4194304,
]
all_latency = [
    2.908333333333333,
    2.9433333333333334,
    2.9616666666666664,
    3.018333333333333,
    2.918333333333333,
    2.8983333333333334,
    2.938333333333333,
    3.0549999999999997,
    8.218333333333334,
    8.468333333333334,
    9.293333333333333,
    8.796666666666667,
    9.456666666666667,
    11.026666666666666,
    13.121666666666668,
    18.541666666666668,
    27.801666666666666,
    46.13666666666666,
    88.77666666666666,
    119.40500000000002,
    230.26166666666666,
    456.06,
    882.3716666666666,
    1835.3999999999999,
]
ud_verbs_latency = [
    2.06,
    1.9166666666666667,
    1.9133333333333333,
    1.9116666666666668,
    1.9066666666666665,
    2.02,
    2.0433333333333334,
    2.11,
    2.2133333333333334,
    3.7433333333333336,
    4.051666666666667,
    4.626666666666666,
    5.908333333333334,
    8.803333333333333,
    10.975,
    14.956666666666665,
    23.218333333333334,
    37.303333333333335,
    65.10000000000001,
    131.52166666666668,
    250.92333333333332,
    486.19666666666666,
    927.3516666666666,
    1853.283333333333,
]
tcp_latency = [
    17.0075,
    12.055,
    12.01,
    11.99,
    16.695,
    15.535,
    12.0525,
    12.055,
    12.155,
    12.3475,
    12.6675,
    13.3625,
    17.7825,
    20.322499999999998,
    36.7825,
    58.455,
    90.6075,
    125.37,
    194.025,
    524.975,
    743.7225,
    1356.315,
    2128.57,
    3830.5766666666664,
]

# OSU MPI Bandwidth Test Data
sizes_bandwidth = [
    1,
    2,
    4,
    8,
    16,
    32,
    64,
    128,
    256,
    512,
    1024,
    2048,
    4096,
    8192,
    16384,
    32768,
    65536,
    131072,
    262144,
    524288,
    1048576,
    2097152,
    4194304,
]
all_bandwidth = [
    2.3233333333333333,
    4.663333333333333,
    9.736666666666666,
    18.76,
    38.36,
    75.68666666666667,
    139.53333333333333,
    207.68999999999997,
    402.6483333333333,
    754.7599999999999,
    1189.4683333333335,
    1647.5833333333333,
    1902.235,
    2087.5033333333336,
    2155.22,
    2202.5066666666667,
    2232.685,
    2244.205,
    2201.0783333333334,
    2408.8883333333333,
    2322.4883333333332,
    2262.885,
    2334.6583333333333,
]
ud_verbs_bandwidth = [
    1.3383333333333332,
    4.696666666666666,
    9.271666666666667,
    19.32,
    27.873333333333335,
    69.64999999999999,
    148.935,
    273.53333333333336,
    314.7916666666667,
    585.9866666666667,
    950.1350000000001,
    1404.55,
    1471.1766666666665,
    1639.6916666666666,
    1798.5783333333331,
    1874.8066666666666,
    1916.743333333333,
    1911.04,
    1947.2416666666668,
    2047.5366666666666,
    2008.9366666666667,
    1939.075,
    2034.385,
]
tcp_bandwidth = [
    0.17666666666666667,
    0.375,
    0.7666666666666666,
    1.41,
    2.858333333333333,
    5.746666666666666,
    12.255,
    22.798333333333332,
    42.97833333333333,
    84.42333333333333,
    161.45166666666668,
    272.52166666666665,
    422.19166666666666,
    600.25,
    770.7066666666666,
    787.73,
    934.2866666666667,
    1098.8516666666667,
    1107.25,
    1079.4916666666666,
    1116.68,
    1073.7983333333334,
    1057.4416666666666,
]

# Plot OSU MPI Latency Test
plt.figure(figsize=(10, 6))
plt.plot(sizes_latency, all_latency, label="all")
plt.plot(sizes_latency, ud_verbs_latency, label="ud_verbs")
plt.plot(sizes_latency, tcp_latency, label="tcp")
plt.xlabel("Message Size (Bytes)")
plt.ylabel("Latency (us)")
plt.title("OSU MPI Latency Test (Multi-Node)")
plt.legend()
plt.grid(True)
plt.show()

# Plot OSU MPI Bandwidth Test
plt.figure(figsize=(10, 6))
plt.plot(sizes_bandwidth, all_bandwidth, label="all")
plt.plot(sizes_bandwidth, ud_verbs_bandwidth, label="ud_verbs")
plt.plot(sizes_bandwidth, tcp_bandwidth, label="tcp")
plt.xlabel("Message Size (Bytes)")
plt.ylabel("Bandwidth (MB/s)")
plt.title("OSU MPI Bandwidth Test (Multi-Node)")
plt.legend()
plt.grid(True)
plt.show()